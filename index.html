---
layout: default
permalink: /
---
<div class="header">
  Go Green!
</div>
<div class="maincanvas">
  <div id="home" class="card">
    <h1>Welcome to the Greener app, conserve resources. Go Green!</h1>
    <table class="container">
      <tr>
        <td class="label">Total points earned:</td>
      </tr>
      <tr>
        <td id="total_pts" class="pts">0</td>
      </tr>
      <tr>
        <td class="hint">Earn points by exploring the resource conservation tips, following up
          with actions in your daily life, sharing tips with friends and family, and
          suggesting new tips!
          <p> Try one of the topics below to start.
          </p>
        </td>
      </tr>
    </table>
  </div>

  <div id="cardlist" class="container"></div>

</div>

<div class="footer">
  <div class="ui-grid-c">
    <div class="ui-block-a"><button class="ui-btn ui-btn-icon-top ui-icon-grid"
        onclick="nav('power');">???</button></div>
    <div class="ui-block-b">
      <button class="ui-btn ui-btn-icon-top ui-icon-home" onclick="nav('home');">Home</button>
    </div>
    <div class="ui-block-c">
      <button class="ui-btn ui-btn-icon-top ui-icon-forward" onclick="nav('water');">Share</button>
    </div>
    <div class="ui-block-d">
      <button class="ui-btn ui-btn-icon-top ui-icon-star" onclick="nav('paper');">Fav</button>
    </div>
  </div><!-- /navbar -->
</div><!-- /footer -->

<div id="cardtemplate" style="display: none;">
  <div class="container" id="__ID__">
    <table class="card">
      <tr>
        <td class="label">__TITLE__</td>
      </tr>
      <tr>
        <td class="hint">__TEXT__</td>
      </tr>
      <tr>
        <td>Upvote &nbsp;&nbsp; &nbsp; Next tip</td>
      </tr>
    </table>
  </div>
</div>

<script lang="javascript">
  function nav(topic) {
    navEnable("home", topic);
    navEnable("power", topic);
    navEnable("water", topic);
    navEnable("paper", topic);
  }
  function navEnable(match, topic) {
    console.log("nav Enable: " + match + " -> " + topic);
    document.getElementById(match).style.display = (topic === match ? "block" : "none");
  }

  // Initialize Cloud Firestore and get the data list.
  if (typeof firebase === 'undefined') throw new Error('Firebase SDK not detected.');
  firebase.initializeApp({ "projectId": "greener-318516" });
  let db = firebase.firestore();
  let dataP = db.collection("greener").get();

  $(document).ready(function () {
    // Render the cards from the content retrieved from the Cloud Firestore
    dataP.then(
      (data) => {
        data.forEach((card) => {
          let s = $("#cardtemplate").html()
            .replace("__TITLE__", card.data()["Title"])
            .replace("__TEXT__", card.data()["Text"]);
          console.log(s);
          $("#cardlist").append(s);
        });
      },
      (error) => {
        console.log("ERROR" + error);
      });
  });

</script>